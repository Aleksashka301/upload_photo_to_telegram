# Программа для загрузки фото в telegram

 Программа имеет скрипты для скачивания фото с таких ресурсов как `api.spacexdata.com`, `api.nasa.gov`. Так же 
создаёт необходимые директории на компьютере. Размещение фото происходит с задержкой и интервалом, которые можно
настроить.

## fetch_spacex_images

 Данный скрипт скачивает фото взлётов SpaceX с сайта `https://api.spacexdata.com/v5/launches/`. Так же создаёт 
директорию `photos from space/spacex`, в данной директории и будут храниться фото скачанные с ресурса. Для выбора
фото запуска нужно ввести id, например такой `5eb87d47ffd86e000604b38a`. При отсутствии id скрипт найдёт последний
запуск у которого есть фото и скачает их в нужную директорию. Скрипт предназначен для работы из терминала. Для 
запуска необходимо ввести команду:
```python
python fetch_spacex_images.py (id запуска)
```

## nasa_images

 Данный скрипт скачивает фото с ресурса `https://api.nasa.gov/planetary/apod`. Так же создаёт директорию
`photos from space/nasa`. В данном скрипте можно настроить необходимое количество фото, которое скачает скрипт,
по умолчанию стоит значение 30. Для того, чтобы изменить количество скачиваемых фото, необходимо изменить
значение параметра `count`
```python
params = {
        'api_key': api_key,
        'count': 30
    }
```
 Для работы скрипта необходим `api key`, который можно получить на сайте `https://api.nasa.gov`. В скрипте так же
предусмотренны исключения. На случай если поле `title` окажется пустым и ссылки там не будет, тогда в консоль
выведется сообщение `Ссылка не найдена`
```python
    try:
        links_images[obj['title'].replace(' ', '_')] = obj['url']
    except KeyError:
        print('Ссылка не найдена!')
```
 На случай если ссылка будет вести не на фото, тогда в консоль выведется сообщение `Не верная ссылка: ссылка`
```python
    try:
        response = requests.get(values)
        response.raise_for_status()
    except requests.exceptions.MissingSchema:
        print(f'Не верная ссылка: {values}')
```
 Так же скрипт перед созданием, проверяет имена картинок. И удаляет знаки не допустимые в названиях файлов такие
как `\/:*?"<>|`
```python
    for symbol in '\/:*?"<>|':
        key = key.replace(symbol, '')
```
 В данном скрипте так же имеется функция `get_file_type(url)`, которая возвращает формат файла. Для работы она 
требует один аргумент `url`
```python
def get_file_type(url):
    file = urlparse(url).path
    file_type = os.path.splitext(file)[-1]

    return file_type
```

## nasa_earth_images

 Данный скрипт скачивает фото земли с ресурса `https://api.nasa.gov/EPIC/archive/natural` Как и пред идущие
скрипты создаёт свою директорию `photos from space/earth photos nasa`, куда в последствии сохраняет фото. Для 
работы скрипта необходим `api key`, который можно получить на сайте `https://api.nasa.gov`.

## telegram_bot

 Основной модуль программы. Для работы скрипта не обходимы `token` от телеграм бота, `chat_id` от телеграм 
сообщества, `trigger_interval` когда и с каким интервалом будет запущен телеграм бот. После запуска скрипта,
запускается заданный при запуске таймер, если же таймер не указан, то по умолчанию установленно значение на 
4 часа. Затем скрипт проверяет содержимое основной папки `photos from space` на наличие вложенных папок и 
картинок в них. После данные сохраняются в словарь `dict` где ключи, это названия папок, а значения ключей фото в
них. При публикации фото в телеграм, сначала случайным образом выбирается папка с фото, а затем, так же случайным
образом выбирается фото из этой папки. Функция `time_interval(timing)` переводит введённые минуты в секунды
Для запуска скрипта нужно ввести команду.
```python
python telegram_bot.py (время отсрочки скрипта и его интервал в минутах)
```
