# Программа для загрузки фото в telegram

 Программа имеет скрипты для скачивания фото с таких ресурсов как `api.spacexdata.com`, `api.nasa.gov`. Так же 
создаёт необходимые директории на компьютере. Размещение фото происходит с задержкой и интервалом, которые можно
настроить.

## fetch_spacex_images

 Данный скрипт скачивает фото взлётов SpaceX с сайта `https://api.spacexdata.com/v5/launches/`. По умолчанию 
ипользуется директория `photos from space/spacex`, но можно указать свою, в данной директории и будут храниться фото 
скачанные с ресурса. Для выбора фото запуска нужно ввести id, например такой `5eb87d47ffd86e000604b38a`. При 
отсутствии id скрипт найдёт последний запуск у которого есть фото и скачает их в нужную директорию. Скрипт 
предназначен для работы из терминала. Для запуска необходимо ввести команду:
```python
python fetch_spacex_images.py директория id_запуска (оба аргумента не обязательны)
```

## nasa_images

 Данный скрипт скачивает фото с ресурса `https://api.nasa.gov/planetary/apod`. По умолчанию ипользуется директория
`photos from space/nasa`, но можно указать свою. В данном скрипте можно настроить необходимое количество фото, 
которое скачает скрипт, по умолчанию стоит значение 30. При запуске скрипта можно указать необходимое количество.
```python
python nasa_images.py количество фотографий директория (оба аргумента не обязательны)
```
 Для работы скрипта необходим `api key`, который можно получить на сайте `https://api.nasa.gov`. В скрипте так же
предусмотренны исключения. На случай если поле `title` окажется пустым и ссылки там не будет, тогда в консоль
выведется сообщение `Ссылка не найдена`. Так же на случай если ссылка будет вести не на фото, тогда в консоль выведется 
сообщение `Не верная ссылка: ссылка`. Перед созданием, скрипт проверяет имена картинок. И удаляет знаки не допустимые 
в названиях файлов такие как `\/:*?"<>|`.

## nasa_earth_images

 Данный скрипт скачивает фото земли с ресурса `https://api.nasa.gov/EPIC/archive/natural` Как и пред идущие
скрипты создаёт свою директорию `photos from space/earth photos nasa`, так же можно укказать свою директоря, куда в 
последствии сохраняет фото. Для работы скрипта необходим `api key`, который можно получить на сайте 
`https://api.nasa.gov`. Для запуска скрипта введите команду.
```python
python nasa_earth_images.py директория (аргумент не обязателен)
```

## helper_functions

 Данный блок содержи вспомогательные функции такие как `get_file_type` принимает url файла, возвращает тип файла 
и `time_interval` принимает заданное время в минутах, возвращает общее время в секундах.

## telegram_bot

 Основной модуль программы. Для работы скрипта не обходимы `token` от телеграм бота, `chat_id` от телеграм 
сообщества, `trigger_interval` когда и с каким интервалом будет запущен телеграм бот. После запуска скрипта,
публикуется первое фото, которое можно выбрать. После запускается таймер заданный при запуске, если же таймер не 
указан, то по умолчанию установленно значение на 4 часа. Затем скрипт проверяет содержимое основной папки 
`photos from space`, так же можно выбрать и другую папку с фото. В случае передачи не существующей директории 
будет пердупреждение `Выбранная директория не существует! Работа программы завершена!` и работа программы будет 
завершена.
```python
python telegram_bot.py директория (интервал в минутах) фото (все аргументы не обязательны)
```

## Установка

 Склонируйте репозиторий на ваш компьютер:

 ```
 git clone https://github.com/Aleksashka301/upload_photo_to_telegram
```

Установите виртуальное окружение:

```
cd upload_photo_to_telegram
python -m venv venv
```

Далее нужно активировать виртуальное окружение:
```
venv\Scripts\activate
```

Для работы программы необходим `Python v3.11`. Так же для работы понадобятся библиотеки, которые находятся в файле
`requirements.txt`. Для их  установки нужно запустить команду:
```
pip install -r requirements.txt
```
После в корневой папке нужно создать файл `.env` и добавит туда переменные окружения:
 1. `NASA_API_KEY` - api ключ от сайта `https://api.nasa.gov` необходим для отправки запросов
 2. `TELEGRAM_TOKEN` - token для телеграм бота, необходим для настройки бота
 3. `TG_CHANNEL_ID` - id канала к которому подключён телеграм бот, как правило имеет тоже id, что и название канала @телеграм_канал
 4. `TRIGGER_INTERVAL` - интервал через который бот будет отправлять сообщения, по умолчанию стоит значение 14400 (4 часа в секундах)

 После можно запустить скрипты поочереди, чтобы создались директории с фото и запустить основной модуль.
